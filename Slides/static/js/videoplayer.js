// Generated by CoffeeScript 1.7.1
(function() {
  this.Videoplayer = (function() {
    function Videoplayer(directory, url, clip, chapters) {
      this.directory = directory;
      this.url = url;
      this.clip = clip;
      this.chapters = chapters;
      this.activeChapter = -1;
      this.loaded = false;
      this.loading = false;
      this.label = $("#flowplayer_controls_label");
      this.play = $("#flowplayer_controls_play");
      this.prev = $("#flowplayer_controls_prev");
      this.next = $("#flowplayer_controls_next");
      this.whereAmI = $("#flowplayer_controls_where_am_i");
      this.play.click((function(_this) {
        return function() {
          return _this.load(0);
        };
      })(this));
    }

    Videoplayer.prototype.load = function(chapter) {
      if (chapter == null) {
        chapter = 0;
      }
      return $f("flowplayer_invisible", this.directory + 'flowplayer-3.2.16.swf', {
        debug: false,
        clip: {
          url: this.clip,
          debug: false,
          provider: 'rtmp',
          autoPlay: true,
          autoBuffering: true,
          onStart: (function(_this) {
            return function() {
              _this.loaded = true;
              _this.setState("active");
              return _this.seekToChapter(chapter);
            };
          })(this)
        },
        plugins: {
          rtmp: {
            url: this.directory + 'flowplayer.rtmp-3.2.12.swf',
            netConnectionUrl: this.url
          }
        }
      });
    };

    Videoplayer.prototype.setState = function(state) {
      return console.log("setting to: " + state);
    };

    Videoplayer.prototype.seekToChapter = function(chapter) {
      return console.log("seeking to chapter: " + chapter);
    };

    return Videoplayer;

  })();

}).call(this);
