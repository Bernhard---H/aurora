{% load humanize %}

<div class="comment_vote">
    <a href='#' class="vote_up_on" data-comment_number="{{ comment.id }}" title="This comment is helpful"><i class="fa fa-angle-up"></i></a><br>
    <a href='#' class="vote_down_on" data-comment_number="{{ comment.id }}" title="This comment is not helpful at all"><i class="fa fa-angle-down"></i></a>

    <br>

    {% if comment.promoted %}
        {% if requester.is_staff %}
            <a href='#' class="comment_demote" data-comment_number="{{ comment.id }}"
               title="Demote this comment">
                1
            </a>
        {% else %}
            <p>1</p>
        {% endif %}
    {% elif requester.is_staff %}
        <a href='#' class="comment_promote" data-comment_number="{{ comment.id }}" title="Promote this comment">
            0
        </a>
    {% endif %}

    <br>

    {% if comment.bookmarked %}
        <a href='#' class="comment_unbookmark" data-comment_number="{{ comment.id }}" title="Remove this comment from Bookmarks">
            <img src="/static/img/heart.png" height="15" width="15">
        </a>
    {% else %}
        <a href='#' class="comment_bookmark" data-comment_number="{{ comment.id }}" title="Bookmark this comment">
            <img src="/static/img/heart_empty.png" height="15" width="15">
        </a>
    {% endif %}
</div>

<div class="comment{% if comment.author.is_staff %} staff_author{% endif %} {{ comment.visibility }}_visibility {% if comment.author == requester %} author_author{% endif %}"
     id="comment_{{ comment.id }}" data-comment_number="{{ comment.id }}"
     data-comment_author="{{ comment.author.display_name }}">
	 <div class="comment_top">
		 <div class="comment_author">{{ comment.author.display_name }}</div>
		 <div class="comment_score"> &nbsp; {% if comment.score > 0 %} +{% endif %}{{ comment.score }}</div>
		 <div class="comment_time">{{ comment.post_date | naturaltime }}</div>
	 </div>

    <div class="comment_body">
		<img src="/{{ comment.author.avatar.url }}">

        <div class="comment_text">
        {% if comment.deleter == None %}
            {{ comment.text | linebreaksbr }}
        {% else %}
            [deleted]
        {% endif %}
        </div>
    </div>

    <div class="comment_bottom">
        {% if comment.deleter != None %}
            <p class="comment_deleter">
                deleted {{ comment.delete_date | naturaltime }} by {{ comment.deleter.display_name }}
            </p>
        {% endif %}

        <div class="comment_actions">
            {% if requester.is_staff and comment.deleter == None %}
            {% endif %}
            {% if requester.is_staff or requester == comment.author and comment.deleter == None %}
                <a href="javascript:void(0)" id="edit_comment_link_{{ comment.id }}" class="edit_link">
                    edit
                </a>
                <a href="javascript:void(0)" id="delete_comment_{{ comment.id }}" data-delete_id="{{ comment.id }}"
                   class="delete_comment">
                    del
                </a>
            {% endif %}
            <a href="javascript:void(0)" id="reply_comment_link_{{ comment.id }}" data-reply_to="{{ comment.id }}"
               class="reply_link">
                reply
            </a>
        </div>
	</div>
</div>
