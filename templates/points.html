
{% block additional_headers %}
  <link rel="stylesheet" href="{{ STATIC_URL }}css/points.css" type="text/css" media="screen"/>
{% endblock %}

<script>
	var position = Math.round(({% for stack_data in stacks %}{{ stack_data.sum }}+{% endfor %}0) / (0.1+60 * {{stack_data|length}} * 100));
	if (position > 100) position=100;
    document.cookie = "AuroraP=" + position + "; expires=Tue, 18 Jan 2038 03:14:06 GMT";
    $('.pagehead').css('background-position', '0 ' + position + '%');
</script>

{% for stack_data in stacks %}
{% if stack_data.course_title == course.title %}
<div class="points_table">
    <table>
        <tr>
          <th colspan=2 class="course_title"></i> {{ stack_data.course_title }}</th>
        </tr>
        {% for stack in stack_data.course_stacks %}
            <tr>
            {% if stack.is_submitted %}
            <tr class="pZeile{{forloop.parentloop.counter}}">
                <td class="stack_name">
					<a style="text-decoration:none; color:black;" href="/{{course.short_title}}/challenge/stack?id={{stack.stack.id}}">
						{% if stack.points_earned != 0 %} <i class="fa fa-check-circle" style="color:gray"></i> {% else %} <i style="color:#3AC958" class="fa fa-circle-o"></i>{% endif %}
						{{ stack.stack.title }}</a></td>
                <td class="punkte" style="vertical-align:bottom;">{{ stack.points_earned }}/{{ stack.points_available }}</td>
            </tr>
            {% endif %}
        {% endfor %}

        <tr>
            <td>Slide Special Points</td>
            <td class="punkte">(inactive)</td>
        </tr>
        <tr class="sum">
            <td class="letztezeile sum">Total</td>
            <td class="letztezeile punkte">{{ stack_data.earned_total }} / {{ stack_data.submitted_total }}</td>
        </tr>
        <tr>
            <td colspan=2>Next hand-in after 
            <span class="punkte">{% if not stack_data.lock_period %}now{% else %}{{ stack_data.lock_period|date:"d. M Y,H:i" }}{% endif %}</span>
        </tr>
    </table>
</div>
{% endif %}
{% endfor %} 
