{% load humanize %}
{% block content %}


    <table>
    {% for elaboration in stack_elaborations %}
        <tr onclick="load_reviews({{ elaboration.id }})" class="{% cycle 'darkTableRow' 'lightTableRow' %}">
            <td><img src="{{ elaboration.challenge.image.url }}" class="mini_task_img"></td>
            <td>{{ elaboration.challenge.title }}</td>
            <td class="timestamp" title="{{ elaboration.submission_time }}">{{ elaboration.submission_time|naturaltime }}</td>
            <td class="indicator_field">
				<div title="Great work" class="awesome_reviews indicator">{{ elaboration.get_awesome_reviews|length }}</div>
                <div title="Good work" class="success_reviews indicator">{{ elaboration.get_success_reviews|length }}</div>
                <div title="Barely acceptable work" class="fail_reviews indicator">{{ elaboration.get_fail_reviews|length }}</div>
                <div title="Unacceptable" class="notry_reviews indicator">{{ elaboration.get_nothing_reviews|length }}</div>
                <div title="Public comments" class="visible_comments indicator">{{ elaboration.get_visible_comments|length }}</div>
                <div title="Private comments" class="invisible_comments indicator">{{ elaboration.get_invisible_comments|length }}</div></td>
        </tr>
    {% endfor %}
    </table>
	<script>
		$(".indicator:contains('0')").addClass('zero_reviews');
		$(".timestamp").text($(".timestamp").text().replace(' days','d'));
		$(".timestamp").text($(".timestamp").text().replace(' day','d'));
		$(".timestamp").text($(".timestamp").text().replace(' hours','h'));
		$(".timestamp").text($(".timestamp").text().replace(' hour','h'));
		$(".timestamp").text($(".timestamp").text().replace(' weeks','w'));
		$(".timestamp").text($(".timestamp").text().replace(' week','w'));
		$(".timestamp").text($(".timestamp").text().replace(',',''));
		$(".timestamp").text($(".timestamp").text().replace(' ago',''));
	</script>

{% endblock %}