{% load humanize %}
{% load endless %}

{% block content %}
	<div class="loading_animation">
		<img src="{{ STATIC_URL }}img/loading3.gif">
	</div>
    <table class="overview_table">
        <tr>
            <th>student</th>
            <th>
                <i class="fa fa-angle-double-up" onclick="sort('elab_asc')"></i>
                elaboration
                <i class="fa fa-angle-double-down" onclick="sort('elab_desc')"></i>
            </th>
            <th>
                <i class="fa fa-angle-double-up" onclick="sort('date_asc')"></i>
                hand in
                <i class="fa fa-angle-double-down" onclick="sort('date_desc')"></i>
            </th>
            <th class="indicator_field" >reviews</th>
        </tr>

        {% paginate elaborations with "/evaluation/" %}
        {% for elaboration in elaborations %}
            <tr class="{% cycle 'darkRow' 'lightRow' %}">&nbsp;
                <td onclick="load_details({{ elaboration.id }})"><img class="gravatar" src="{{ elaboration.user.avatar.url }}" style="vertical-align:middle"> {{ elaboration.user.nickname }}</td>
                <td onclick="load_details({{ elaboration.id }})">{{ elaboration.challenge.title }}</td>
                <td class="timestamp" onclick="load_details({{ elaboration.id }})" title="{{ elaboration.submission_time }}">{{ elaboration.submission_time|naturaltime}}</td>
                <td onclick="load_details({{ elaboration.id }})">
                <div title="Great work" class="awesome_reviews indicator">{{ elaboration.get_awesome_reviews|length }}</div>
                <div title="Good work" class="success_reviews indicator">{{ elaboration.get_success_reviews|length }}</div>
                <div title="Barely acceptable work" class="fail_reviews indicator">{{ elaboration.get_fail_reviews|length }}</div>
                <div title="Unacceptable" class="notry_reviews indicator">{{ elaboration.get_nothing_reviews|length }}</div>
                 <div title="Public comments" class="visible_comments indicator">{{ elaboration.get_visible_comments|length }}</div>
                 <div title="Private comments" class="invisible_comments indicator">{{ elaboration.get_invisible_comments|length }}</div>
                 {% if elaboration.get_lva_team_notes %}<div title="LVA team notes" class="lva_team_notes whisperframe indicator">&nbsp;</div>{% else %}<div class="lva_team_notes indicator zero_reviews">&nbsp;</div>{% endif %}
                </td>
            </tr>
        {% endfor %}
        {% get_pages %}
        {{ pages.previous }} {{ pages.next }}

    </table>
	<script>
		$(".indicator:contains('0')").addClass('zero_reviews');
	</script>

{% endblock %}