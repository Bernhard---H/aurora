{% block additional_headers %}
  <script type="text/javascript" src="{{ STATIC_URL }}tinymce/tinymce.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}tinymce/jquery.tinymce.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}js/stack.js"></script>
  <link rel="stylesheet" href="{{ STATIC_URL }}css/challenge.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="{{ STATIC_URL }}css/stack.css" type="text/css" media="screen"/>
{% endblock %}
   
<div class="challenges_stack">

  <h1>Stack</h1>

  {% for challenge_dict in challenges_active %}
  <div class="singleChallenge">
    <div class="challenge active {% cycle 'lineD' 'lineL' %}" id="{{ challenge_dict.challenge.id }}">
    <div class="description" > {{ challenge_dict.challenge.description }} </div>
    <img class="challenge_image active" src="{{ STATIC_URL }}img/{{ challenge_dict.challenge.image_url }}">
    {% if challenge_dict.success %}
      <div class="received_review">
        Success: {{ challenge_dict.success }}
      </div>
    {% endif %}
    {% if challenge_dict.nothing %}
      <div class="received_review">
        Nothing: {{ challenge_dict.nothing }}
      </div>
    {% endif %}
    {% if challenge_dict.fail %}
      <div class="received_review">
        Fail: {{ challenge_dict.fail }}
      </div>
    {% endif %}
    {% if challenge_dict.awesome %}
      <div class="received_review">
        Awesome: {{ challenge_dict.awesome }}
      </div>
    {% endif %}

    {% if not challenge_dict.challenge.is_final_challenge %}
      <div class="review_wrapper">
        {% for review in challenge_dict.reviews %}
          {% if review %}
            {% if review.submitted %}
              <div class="review_box done" id="{{ review.id }}" challenge_id="{{ challenge_dict.challenge.id }}"></div>
            {% else %}
              <div class="review_box in_progress" id="{{ review.id }}"
                   challenge_id="{{ challenge_dict.challenge.id }}"></div>
            {% endif %}
          {% elif not challenge_dict.submitted %}
            <div class="review_box inactive"></div>
          {% else %}
            <div class="review_box active" challenge_id="{{ challenge_dict.challenge.id }}"></div>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
	</div>
  {% endfor %}

  {% for challenge in challenges_inactive %}
    <div class="challenge" id="{{ challenge.id }}">
      <div class="title"> {{ challenge.title }} </div>
      <div class="description"> {{ challenge.description }} </div>
      <img class="challenge_image" src="{{ STATIC_URL }}img/{{ challenge.image_url }}">
    </div>
    {% if not challenge.is_final_challenge %}
      <div class="review_wrapper">
        <div class="review_box inactive"></div>
        <div class="review_box inactive"></div>
        <div class="review_box inactive"></div>
      </div>
    {% endif %}
  {% endfor %}

  </div>
</div>
