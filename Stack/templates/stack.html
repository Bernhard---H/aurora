{% block additional_headers %}
  <script type="text/javascript" src="{{ STATIC_URL }}tinymce/tinymce.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}tinymce/jquery.tinymce.min.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}js/stack.js"></script>
  <link rel="stylesheet" href="{{ STATIC_URL }}css/challenge.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="{{ STATIC_URL }}css/stack.css" type="text/css" media="screen"/>
{% endblock %}
   
<div class="challenges_stack">

  <h1>Stack</h1>
  {% for challenge_dict in challenges_active %}
		<div class="challenge active {% cycle 'lineD' 'lineL' %}" id="{{ challenge_dict.challenge.id }}">
			<img class="challenge_image active" src="{{ STATIC_URL }}img/{{ challenge_dict.challenge.image_url }}">
			<div class="challenge_description" > {{ challenge_dict.challenge.description }} </div>
			<b>Status:</b> 
	{{challenge_dict.success|add:challenge_dict.nothing|add:challenge_dict.fail|add:challenge_dict.awesome}} participants have reviewed your work and came to the following conclusion: 
    {% if challenge_dict.awesome %}
		<span class="received_review">
			{{ challenge_dict.awesome }} Awesome,
		</span>
    {% endif %}
    {% if challenge_dict.success %}
		<span class="received_review">
        	{{ challenge_dict.success }} Success,
     	</span>
    {% endif %}
    {% if challenge_dict.nothing %}
      	<span class="received_review">
        	{{ challenge_dict.nothing }} »Lame«,
      	</span>
    {% endif %}
    {% if challenge_dict.fail %}
      	<span class="received_review">
        	{{ challenge_dict.fail }} Epic Fail. 
      	</span>
    {% endif %}
    {% if not challenge_dict.challenge.is_final_challenge %}
      <div class="review_wrapper">
	  	<div class="review_label">Your reviews</div>
        {% for review in challenge_dict.reviews %}
          {% if review %}
            {% if review.submitted %}
              <div class="review_box done" id="{{ review.id }}" challenge_id="{{ challenge_dict.challenge.id }}"><i class="fa fa-check-square-o"></i></div>
            {% else %}
              <div class="review_box in_progress" id="{{ review.id }}"
                   challenge_id="{{ challenge_dict.challenge.id }}"> </div>
            {% endif %}
          {% elif not challenge_dict.submitted %}
            <div class="review_box inactive"></div>
          {% else %}
            <div class="review_box active" challenge_id="{{ challenge_dict.challenge.id }}"><i class="fa fa-pencil-square-o"></i></div>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
	</div>
  {% endfor %}
  
  {% for challenge in challenges_inactive %}
    <div class="challenge {% cycle 'lineD' 'lineL' %}" id="{{ challenge.id }}">
        <img class="challenge_image" src="{{ STATIC_URL }}img/{{ challenge.image_url }}">
      <div class="title"> {{ challenge.title }} </div>
      <div class="description"> {{ challenge.description }} </div>
    </div>
    {% if not challenge.is_final_challenge %}
      <div class="review_wrapper">
        <div class="review_box inactive"></div>
        <div class="review_box inactive"></div>
        <div class="review_box inactive"></div>
      </div>
    {% endif %}
  {% endfor %}

  </div>
</div>
